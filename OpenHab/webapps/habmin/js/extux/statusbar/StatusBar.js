/*! HABmin 2014-06-20 */
Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var a="right"===this.statusAlign;this.callParent(arguments),this.currIconCls=this.iconCls||this.defaultIconCls,this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""}),a?(this.cls+=" x-status-right",this.add("->"),this.add(this.statusEl)):(this.insert(0,this.statusEl),this.insert(1,"->"))},setStatus:function(a){var b=this;if(a=a||{},Ext.suspendLayouts(),Ext.isString(a)&&(a={text:a}),void 0!==a.text&&b.setText(a.text),void 0!==a.iconCls&&b.setIcon(a.iconCls),a.clear){var c=a.clear,d=b.autoClear,e={useDefaults:!0,anim:!0};Ext.isObject(c)?(c=Ext.applyIf(c,e),c.wait&&(d=c.wait)):Ext.isNumber(c)?(d=c,c=e):Ext.isBoolean(c)&&(c=e),c.threadId=this.activeThreadId,Ext.defer(b.clearStatus,d,b,[c])}return Ext.resumeLayouts(!0),b},clearStatus:function(a){a=a||{};var b=this,c=b.statusEl;if(a.threadId&&a.threadId!==b.activeThreadId)return b;var d=a.useDefaults?b.defaultText:b.emptyText,e=a.useDefaults&&b.defaultIconCls?b.defaultIconCls:"";return a.anim?c.el.puff({remove:!1,useDisplay:!0,callback:function(){c.el.show(),b.setStatus({text:d,iconCls:e})}}):b.setStatus({text:d,iconCls:e}),b},setText:function(a){var b=this;return b.activeThreadId++,b.text=a||"",b.rendered&&b.statusEl.setText(b.text),b},getText:function(){return this.text},setIcon:function(a){var b=this;return b.activeThreadId++,a=a||"",b.rendered?(b.currIconCls&&(b.statusEl.removeCls(b.currIconCls),b.currIconCls=null),a.length>0&&(b.statusEl.addCls(a),b.currIconCls=a)):b.currIconCls=a,b},showBusy:function(a){return Ext.isString(a)&&(a={text:a}),a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(a)}});